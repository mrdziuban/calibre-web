{% extends "layout.html" %}
{% block header %}
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jquery-footable/3.1.4/footable.standalone.min.css">
<style>
  #fix-height {
    height: auto !important;
  }
  .footable th {
    border-bottom: none !important;
    text-align: center !important;
    padding: 3px !important;
  }
  .footable td {
    border-top: none !important;
    vertical-align: middle !important;
    text-align: center !important;
    padding: 3px !important;
  }
</style>
{% endblock %}
{% block body %}
<div class="discover">
  <h2>{{title}}</h2>
  <div id="fix-height" class="row">
    <div class="col-lg-12">
      <table
        class="footable-init table"
        data-sorting="true"
        style="border-collapse: separate; border-spacing: 3px; width: 100%;"
      >
        <thead>
          <tr>
            <th data-type="html" data-sortable="false" data-breakpoints="xs"></th>
            <th data-type="html">Book</th>
            <th data-type="numeric">Rating</th>
            <th data-type="numeric" data-breakpoints="xs">Reviews</th>
            <th data-type="numeric">Pages</th>
            <th data-type="html" data-sortable="false" data-breakpoints="xs">DL?</th>
          </tr>
        </thead>
        <tbody>
          {% for x in books %}
            <tr>
              <td><img src="{{ x['goodreads_book']['image'] }}" style="width: 100px;"></td>
              <td data-sort-value="{{ _(' '.join(x['goodreads_book']['title_parts'])) }}">
                <a href="{{ x['goodreads_book']['link'] }}" target="_blank">
                  <span style="display: inline-block;">{{ x['goodreads_book']['title'] }}</span><br>
                  {{ x['goodreads_book']['author'] }}
                </a>
              </td>
              <td>{{ x['goodreads_book']['rating'] }}</td>
              <td>{{ x['goodreads_book']['ratings'] }}</td>
              <td>{{ x['goodreads_book']['pages'] }}</td>
              <td style="font-size: 20pt;">
                {% if x['matching_books'][0] %}
                <a
                  href="{{ url_for('show_book', book_id=x['matching_books'][0].id) }}"
                  data-toggle="modal"
                  data-target="#bookDetailsModal"
                  data-remote="false"
                  style="color: #449d44;"
                >
                  ✓
                </a>
                {% else %}
                <a
                  href="https://althub.co.za/search/{{ _(' '.join(x['goodreads_book']['title_parts'])) }} {{ _(x['goodreads_book']['author']) }}"
                  target="_blank"
                  style="color: #c9302c;"
                >
                  ✘
                </a>
                {% endif %}
              </td>
            </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>
</div>
{% endblock %}
{% block js %}
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-footable/3.1.4/footable.min.js"></script>
<script>
  $(function() {
    $('.footable-init').each(function(i, el) { $(el).footable({ state: { enabled: true } }); });
  });
</script>
{% endblock %}
